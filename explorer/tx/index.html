<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Transaction Details</title>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<style>
body { background: #0a0f2c; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
.card { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; }
a { color: #6bc8ff; }
</style>
</head>
<body>
<h2>Transaction Details</h2>
<div id="tx-details" class="card">Loading...</div>

<script>
const RPC_URL = 'https://rpc.bitsoley.com';
const web3 = new Web3(new Web3.providers.HttpProvider(RPC_URL));

// Get the hash from the URL
const pathParts = window.location.pathname.split('/');
const txHash = pathParts[pathParts.length - 1] || pathParts[pathParts.length - 2];

if (!/^0x([A-Fa-f0-9]{64})$/.test(txHash)) {
  document.getElementById('tx-details').innerHTML = 'Invalid transaction hash in URL.';
} else {
  loadTx();
}

async function loadTx() {
  try {
    const tx = await web3.eth.getTransaction(txHash);
    if (!tx) {
      document.getElementById('tx-details').innerHTML = 'Transaction not found.';
      return;
    }
    document.getElementById('tx-details').innerHTML = `
      <p><strong>Hash:</strong> ${tx.hash}</p>
      <p><strong>From:</strong> <a href="/address/${tx.from}">${tx.from}</a></p>
      <p><strong>To:</strong> <a href="/address/${tx.to}">${tx.to}</a></p>
      <p><strong>Value:</strong> ${web3.utils.fromWei(tx.value, 'ether')} ETH</p>
      <p><strong>Block:</strong> <a href="/block/${tx.blockNumber}">${tx.blockNumber}</a></p>
      <p><strong>Gas:</strong> ${tx.gas}</p>
    `;
  } catch (err) {
    document.getElementById('tx-details').innerHTML = 'Error loading transaction.';
  }
}
</script>
</body>
</html>
